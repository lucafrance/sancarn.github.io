<html>
  <head>
    <!--<Include Theme>-->
    <link rel="stylesheet" type="text/css" href="./css/Cayman.css"/>

    <!--<Include JQuery>-->
    <script src="./libs/libs/jquery.min.js"></script>

    <!--<Include JSZip>-->
    <script src="./libs/libs/jszip.min.js"></script>
    <!--<Include JSZipUtils>-->
    <script src="./libs/libs/jszip-utils.min.js"></script>
    
    <!--<Include JSTree for visualtisation>-->
    <script src="./libs/libs/jstree.min.js"></script>
    <link rel="stylesheet" href="./libs/libs/jstree.css" />

    <!--<Include Transportable parser + css>-->
    <script src="./libs/Transportable.js"></script>
    <link rel="stylesheet" href="./libs/Transportable.css" />

  </head>
  <body>
      <header class="page-header">
          <h1>Parsing ICM Standalone and Transportable databases</h1>
          <p>James Warren</p>
      </header>
      <main class="main-content">
          <h2>Motivation</h2>

          <p>
            Transportable databases are one of the easiest (and fundamental) methods hydraulic modellers use to share data. A consultant might submit their hydraulic models to the client via ICM transportables. Unfortunately, many clients do not have access to InfoWorks or InfoNet meaning that validation that the consultant has actually done the work is difficult.
          </p>

          <p>
            Given that it is vitally important for companies to be able to check their data, it is also extremely important that there are cheap and easy solutions to check the contents of transportable databases without requiring expensive modelling software.
          </p>
          
          <p>
            In this article, I'll take you through a problem which has taken me 2 years to solve.
          </p>

          <h1>Transportable database structure</h1>

          <p>
            About a year ago I posted an article on LinkedIn about understanding the InfoWorks CS database structure. Within this article I briefly covered the structure of transportable databases. I explained how, 1 year prior to writing the article, I had come across an error while trying to open a corrupt transportable database:
          </p>

          <blockquote>
            <i>
                Error extracting file Globals.Dat into ... error in <b>zipfile (2)</b>.
            </i>
          </blockquote>

          <p>
            At this point curiosity got the best of me and I opened the transportable database in 7-zip to take a peak inside. Below is an interactive example of an unzipped transportable database. All files which contain binary data have been removed for now.
          </p>

          <script>
              $(function(){
                window.transportable = new Transportable("./libs/Transportable.icmt")
                window.transportable.onLoad(function(){
                  transportable.toFileViewer("#TDBEG1");
                })
              })
          </script>
          <div id="TDBEG1"></div>

          <p>
            Ever since I discovered that you could unzip a transportable, I began wondering which other data could be extracted from transportable databases into other applications. The possibilities seemed endless.
          </p>

          <h2>Investigating the raw files</h2>

          <p>
            After the transportable database shown above is loaded in ICM it has the following database structure:
          </p>
          <script>
            $(function(){
              //window.transportable = new Transportable("./libs/Transportable.icmt")
              window.transportable.onLoad(function(){
                transportable.toJsTree("#TransportablePreview1");
              })
            })
          </script>
          <div id="TransportablePreview1"></div>
          
          <p>
            Some great detail in the next section here also!
          </p>

      </main>
  </body>
</html>


<!--<
   Recently I got 1 step closer to my vision of automated transportable database management.
>-->



