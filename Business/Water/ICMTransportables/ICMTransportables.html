<html>
  <head>
    <!--<Include Theme>-->
    <link rel="stylesheet" type="text/css" href="./css/Cayman.css"/>
    
    <!--<Include data>-->
    <script src="./data/Data.js"></script>

    <!--<Include JQuery>-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.1/jquery.min.js"></script>

    <!--<Include JSTree>-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.2.1/themes/default/style.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.3.6/jstree.min.js"></script>
  </head>
  <body>
      <header class="page-header">
          <h1>Parsing ICM Standalone and Transportable databases</h1>
          <p>James Warren</p>
      </header>
      <main class="main-content">
          <h2>Motivation</h2>

          <p>
            Transportable databases are one of the easiest (and fundamental) methods hydraulic modellers use to share data. A consultant might submit their hydraulic models to the client via ICM transportables. Unfortunately, many clients do not have access to InfoWorks or InfoNet meaning that validation that the consultant has actually done the work is difficult.
          </p>

          <p>
            Given that it is vitally important for companies to be able to check their data, it is also extremely important that there are cheap and easy solutions to check the contents of transportable databases without requiring expensive modelling software.
          </p>
          
          <p>
            In this article, I'll take you through a problem which has taken me 2 years to solve.
          </p>

          <h1>Transportable database structure</h1>

          <p>
            About a year ago I posted an article on LinkedIn about understanding the InfoWorks CS database structure. Within this article I briefly covered the structure of transportable databases. I explained how, 1 year prior to writing the article, I had come across an error while trying to open a corrupt transportable database:
          </p>

          <blockquote>
            <i>
                Error extracting file Globals.Dat into ... error in <b>zipfile (2)</b>.
            </i>
          </blockquote>

          <p>
            At this point curiosity got the best of me and I opened the transportable database in 7-zip to take a peak inside. Below is an interactive example of an unzipped transportable database. All files which contain binary data have been removed for now.
          </p>

          <div class="TDB_Structure_Full">
            <script>
              $(function(){
                var tree = $("#TDBFull1").jstree({
                  'core':{
                    'data':window.data.TSDBFull1,
                    'themes' : {
                      'responsive' : false,
                      'variant' : 'small',
                      'stripes' : true
                    }
                  },
                  "plugins":[
                    "wholerow"
                  ]
                });
                tree.on("select_node.jstree",function(e,data){
                  $("#TDBFull1TA").val(data.node.data.contents)
                });
                window.tree = tree
              });
              
            </script>
            <style>
              .TDB_Structure_Full {
                display:table;
                table-layout:fixed;
                width:100%;
                height:144px;
              }
              .TDBFull1 {
                display:table-cell;
                resize:none;
                height:100%;
              }
              textarea {
                width:100%;
                font-size: 10px;
                resize:none;
                border-color:rgb(240, 240, 240);
              }
              textarea:focus {
                outline: none !important;
              }
            </style>
            <div id="TDBFull1" class="TDBFull1"></div>
            <textarea id="TDBFull1TA" class="TDBFull1" readonly></textarea>
          </div>

          <p>
            Ever since I discovered that you could unzip a transportable, I began wondering what other data could be parsed out and into other applications. The possibilities seemed endless.
          </p>

          <h2>Investigating the raw files</h2>

          <p>
            Let's look in a bit more detail at the above example, the resultant database tree and how this data could be linked together.
          </p>

      </main>
  </body>
</html>


<!--<
   Recently I got 1 step closer to my vision of automated transportable database management.
>-->



